<html xmlns:th="http://thymeleaf.org">
  <head>
    <title>Online Bank</title>
    <link rel="stylesheet" href="/css/transactions.css"/>
  </head>
  <body>
    <h2>Transaction History</h2>
    
    <!-- Conditionally show all transactions or a single transaction detail -->
    
    <!-- Show the full transaction history -->
    <div th:if="${transaction == null}">
      <table>
        <tr>
          <th>ID</th>
          <th>Date</th>
          <th>Retailer</th>
          <th>Funds In</th>
          <th>Funds Out</th>
        </tr>
        <!-- Dynamically list all the transactions from the Repository --> 
        <tr th:each="transaction : ${transactions}">
          <td>
            <a th:href="@{/transactions/{transactionId}(transactionId=${transaction.id})}">
              [[${transaction.id}]]
            </a>
          </td>
          <td>[[${transaction.date}]]</td>
          <td>[[${transaction.retailer}]]</td> 
          <td th:text="${transaction.amount > 0 ? transaction.amount : ''}"></td>
          <td th:text="${transaction.amount < 0 ? transaction.amount : ''}"></td>
        </tr>
      </table>
    </div>
    
    <!-- Show the details of a single transaction -->
    <div th:if="${transaction != null}">
      <h3>Transaction Details</h3>
      <p><b>Transaction ID: [[${transaction.id}]]</b></p>
      <p>Date: [[${transaction.date}]]</p>
      <p>Retailer: [[${transaction.retailer}]]</p>
      <p>Amount: [[${transaction.amount}]]</p>
      
      <a th:href="@{/transactions}">Back to Transaction History</a>
    </div>
  </body>
</html>
